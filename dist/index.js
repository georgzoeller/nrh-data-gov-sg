// Generated by CoffeeScript 2.0.1
(function() {
  module.exports.name = 'data.gov.sg';

  module.exports.url = 'https://api.data.gov.sg/v1';

  module.exports.imports = {
    environment: [__dirname + '/environment'],
    transport: [__dirname + '/transport']
  };

  module.exports.authCallbacks = {
    'default': function(msg) {
      return msg.addHeader('api-key', process.env.DATA_GOV_SG_KEY);
    }
  };

  module.exports.registerExtensions = function(api) {
    return {
      defaultCall: function(endpoint, date, fullDay = false) {
        var param;
        if (date != null) {
          date = date.toISOString();
        }
        param = fullDay ? 'data' : 'date_time';
        return api.createCall({
          endpoint: endpoint
        }).describe(`getting ${endpoint} for ${date || 'now'}`).authorizeByDefault().setMethod('GET').addHeader(param, date);
      }
    };
  };

}).call(this);
